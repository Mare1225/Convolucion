Jump Convolucion
M1, HEX 003
Matriz1, DEC 4
 HEX 013
 HEX 023 
 HEX 033 
 HEX 043 
 HEX 053
 HEX 063
 HEX 073
 HEX 083
 HEX 093
 HEX 0A3
 HEX 0B3
 HEX 0C3
 HEX 0D3
 HEX 0E3
 HEX 0F3
 HEX 103
Matriz1F1, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F2, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F3, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F4, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F5, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F6, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F7, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F8, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F9, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F10, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
 DEC 1
Matriz1F11, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz1F12, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz1F13, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz1F14, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz1F15, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz1F16, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0


M2, HEX 115
Matriz2, DEC 3
 HEX 125 
 HEX 135 
 HEX 145 
 HEX 155 
 HEX 165
 HEX 175
 HEX 185
 HEX 195
 HEX 1A5
 HEX 1B5
 HEX 1C5
 HEX 1D5
 HEX 1E5
 HEX 1F5
 HEX 205
 HEX 215
Matriz2F1, DEC -5
 DEC -6
 DEC -7
 DEC -4
 DEC -1
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F2, DEC -8
 DEC -9
 DEC -10
 DEC -4
 DEC -1
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F3, DEC -11
 DEC -12
 DEC -13
 DEC -4
 DEC -1
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F4, DEC 1
 DEC 1
 DEC 1
 DEC -4
 DEC -1
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F5, DEC -1
 DEC -2
 DEC -3
 DEC -4
 DEC -1
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F6, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F7, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F8, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F9, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F10, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F11, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F12, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F13, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F14, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F15, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz2F16, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0


M3, HEX 227
Matriz3, DEC 5
 HEX 237 
 HEX 247 
 HEX 257 
 HEX 267 
 HEX 277
 HEX 287
 HEX 297
 HEX 2A7
 HEX 2B7
 HEX 2C7
 HEX 2D7
 HEX 2E7
 HEX 2F7
 HEX 307
 HEX 317
 HEX 327
Matriz3F1, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F2, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F3, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F4, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F5, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F6, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F7, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F8, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F9, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F10, DEC 1
 DEC 2
 DEC 3
 DEC 4
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F11, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F12, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F13, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F14, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F15, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
Matriz3F16, DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 DEC 0
 
/ Arreglo de los dígitos
Num, DEC 0
NumTrans, DEC 0
CntM10, DEC 0
Mod10, DEC 0

Dig, HEX 33F
DigCnt, DEC 0
INDDig, HEX 33F
Digitos, DEC 0
DEC 0
DEC 0
DEC 0
DEC 0
DEC 0

Matriz, DEC 0
M, DEC 0
I, DEC 0
J, DEC 0
KI, DEC 0 
KJ, DEC 0
XI, DEC 0
XJ, DEC 0
INDF1, HEX 000
INDC1, HEX 000
INDF2, HEX 000
INDC2, HEX 000
INDF3, HEX 000
INDC3, HEX 000

LimM2, DEC 0
CntM2, DEC 0
CntMul, DEC 0
FlgMult, DEC 0

Sum, DEC 0
Sum2, DEC 0

Uno, DEC 1
Dos, DEC 2
Tres, DEC 3
Cuatro, DEC 4
Cinco, DEC 5
Diez, DEC 10

/ Variables para imprimir
EspLinea, DEC 10
Espacio, DEC 9	/ Sino cambiar a 32 - 9
Signo, DEC 45
Numero, DEC 48
X, DEC 88
K, DEC 75
Y, DEC 89
Igual, DEC 61


Convolucion, Load Cuatro
 Store Matriz1
 Store Matriz3
 Load Tres
 Store Matriz2
 
 Load Matriz2
 Store LimM2
 JnS DividirPara2
 Load CntM2
 Store LimM2
 
 
Loop1, Load I
 Add Uno
 Store I
 Clear
 Store J
Loop2, Load J
 Add Uno
 Store J
 Clear
 Store Sum
 Store KI
Loop3, Load KI
 Add Uno
 Store KI
 Clear
 Store KJ
Loop4, Load KJ
 Add Uno
 Store KJ

 / Primero crear los indices para la nueva matriz (XI y XJ)
 Load I
 Add KI
 Subt LimM2
 Subt Dos
 Store XI
 Load J
 Add KJ
 Subt LimM2
 Subt Dos
 Store XJ

 / Ahora toca el if
 Load XI
 /Output
 Skipcond 000
 Jump SegundoIf
 Jump FinalLoops
SegundoIf, Load XI
 Subt Matriz1
 /Output
 Skipcond 000
 Jump FinalLoops
 Jump TercerIf
TercerIf, Load XJ
 /Output
 Skipcond 000
 Jump CuartoIf
 Jump FinalLoops
CuartoIf, Load XJ
 Subt Matriz1
 /Output
 Skipcond 000
 Jump FinalLoops
 Jump ProcesoCon

/ Con el if se determinan los casos donde agregar los valores a la suma
ProcesoCon, Load M1
 Add XI			/ Determinar la fila
 Store INDF1
 LoadI INDF1
 Add XJ			/ Determinar la columna
 Store INDC1
 
 Load M2
 Add KI
 Subt Uno
 Store INDF2
 LoadI INDF2
 Add KJ
 Subt Uno
 Store INDC2
 
 LoadI INDC1
 Store CntMul
 Skipcond 400
 JnS MultiplicarCon
 
 LoadI INDC1
 Skipcond 800
 Jump ComprFlg
 Jump NoNegativo
 
ComprFlg, Load FlgMult
 Skipcond 400
 JnS MultNeg
 
NoNegativo, Load Sum2
 Add Sum
 Store Sum
 Clear
 Store Sum2
 Store FlgMult

 /Esto sirve para comprobar los valores de la convolución
 /Load Sum
 /Output

FinalLoops, Load KJ
 Subt Matriz2
 Skipcond 000
 Jump FinalizarLoop4
 Jump Loop4
FinalizarLoop4, Load KI
 Subt Matriz2
 Skipcond 000
 Jump FinalizarLoop3
 Jump Loop3
FinalizarLoop3, JnS AsignarM3
 / Aquí se puede comprobar el valor final de cada suma
 /Load Sum
 /Output
 Load J
 Subt Matriz1
 Skipcond 000
 Jump FinalizarLoop2
 Jump Loop2
FinalizarLoop2, Load I
 Subt Matriz1	
 Skipcond 000
 Jump Terminar
 Jump Loop1

Terminar, Clear
 Store I
 Store J
 Store INDF1
 Store INDF2
 Store INDF3
 Store INDC1
 Store INDC2
 Store INDC3
 Load M1
 Store M
 Load Matriz1
 Store Matriz
 Load X
 Output
 Load Igual
 Output
 Load EspLinea
 Output
 JnS MostrarMatriz
 Clear
 Store I
 Store J
 Load EspLinea
 Output
 
 Load M2
 Store M
 Load Matriz2
 Store Matriz
 Load K
 Output
 Load Igual
 Output
 Load EspLinea
 Output
 JnS MostrarMatriz
 Clear
 Store I
 Store J
 Load EspLinea
 Output
 
 Load M3
 Store M
 Load Matriz3
 Store Matriz
 Load Y
 Output
 Load Igual
 Output
 Load EspLinea
 Output
 JnS MostrarMatriz
 Halt


/ Método para mostrar matrices
MostrarMatriz, 	HEX 000
Loop1M, 		Load I
 				Add Uno
 				Store I
 				Clear
 				Store J
Loop2M, 		Load J
 				Add Uno
 				Store J
				
                Load M
                Add I
                Subt Uno
                Store INDF1
				LoadI INDF1
				Add J
                Subt Uno
                Store INDC1
                LoadI INDC1
                
                Store Num
				Skipcond 800
                Jump MostrarSigno
                Load Num
                Jump LoopMod
Transformado,	Load Espacio
				Output
                
                Load J
                Subt Matriz
				Skipcond 000
                Jump FinalizarLoop2M
                Jump Loop2M
FinalizarLoop2M, Load EspLinea
				Output
				Load I
                Subt Matriz
				Skipcond 000
                JumpI MostrarMatriz
                Jump Loop1M


/ Métodos para imprimir
LoopMod, Store NumTrans
 JnS Modulo10
 Load Digitos
 Add Uno
 Store Digitos
 Load NumTrans
 StoreI  INDDig
 Load Mod10
 Subt Diez
 Skipcond 000
 Jump SaltarLoopMod
 Load Mod10
 Skipcond 800
 Jump Mostrar
 Load Digitos
 Add Uno
 Store Digitos
 Load INDDig
 Add Uno
 Store INDDig
 Load Mod10
 StoreI INDDig
 Load INDDig
Mostrar, JnS MostrarDig
 Load Dig
 Store INDDig 
 Jump Transformado

SaltarLoopMod, Load INDDig
 Add Uno
 Store INDDig
 Load Mod10
 Jump LoopMod

MostrarSigno, Skipcond 000
 Jump LoopMod
 Load Signo
 Output
 Clear
 Subt Num
 Jump LoopMod

MostrarDig,		HEX 000
ProcesoMostrar, LoadI INDDig
				Add Numero
				Output
                Load INDDig
				Subt Uno
				Store INDDig
                Load Digitos
				Subt Uno
				Store Digitos
				Skipcond 400
				Jump ProcesoMostrar               
                JumpI MostrarDig


/ Metodos adicionales
DividirPara2, HEX 000
ProcesoDiv2,  Load LimM2
			  Subt Dos
              Store LimM2
              Skipcond 000
              Jump ValProcesoDiv2
              JumpI DividirPara2
ValProcesoDiv2, Load CntM2
 Add Uno
 Store CntM2
 Jump ProcesoDiv2
 
MultiplicarCon, HEX 000
                Skipcond 800
                JnS ConNP
                LoadI INDC2
                Skipcond 000
                Jump ComprMC
				Load Uno
				Add FlgMult
				Store FlgMult
                Jump ProcesoMultC
ComprMC,		Skipcond 400
				Jump ProcesoMultC
				JumpI MultiplicarCon
ProcesoMultC,	LoadI INDC2
				Add Sum2
				Store Sum2
				Load CntMul
				Subt Uno
                Store CntMul
                Skipcond 800
				JumpI MultiplicarCon             
				Jump ProcesoMultC
                
ConNP,	HEX 000
		Clear
		Subt CntMul
		Store CntMul
        Load Uno
		Store FlgMult
		JumpI ConNP
        
MultNeg, 	HEX 000
			Clear
			Subt Sum2
			Store Sum2
			JumpI MultNeg

AsignarM3, 	HEX 000
          	Load M3
           	Add I			/ Determinar la fila
           	Subt Uno
           	Store INDF3
           	LoadI INDF3
           	Add J			/ Determinar la columna
           	Subt Uno
           	Store INDC3
            Load Sum
            / Output
			StoreI INDC3
			JumpI AsignarM3

Modulo10,	HEX 000
			Clear
			Store Mod10
ProcesoM10, Load NumTrans
			Subt Diez
            Skipcond 800
            Jump ComprobarM10
 			Store NumTrans
			Load Mod10
            Add Uno
			Store Mod10
			Load NumTrans
            Jump ProcesoM10	
ComprobarM10, Skipcond 400
			  JumpI Modulo10
              Store NumTrans
              Load Mod10
              Add Uno
              Store Mod10
              JumpI Modulo10
